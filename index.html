<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Fiber Break | BuenoX</title>
    <style>
        :root{--primary:#00f2ff;--accent:#e74c3c;--glass:rgba(15,15,15,0.85);--border:rgba(255,255,255,0.1)}body{margin:0;background-color:#000;color:#fff;overflow:hidden;font-family:'Segoe UI',sans-serif;user-select:none;touch-action:none}.wallpaper{position:fixed;top:0;left:0;width:100%;height:100%;background-image:url('https://cdn.discordapp.com/attachments/1225302395097972796/1454436164894457989/image.png?ex=695114bb&is=694fc33b&hm=6d0e386d8ddf0c658cc44fddf90f5e0e6a0b7a00c9a8c6a25d35367cb3e36e11&');background-size:cover;background-position:center;z-index:-2;filter:blur(10px) brightness(0.2);transform:scale(1.1)}canvas{display:block;position:relative;z-index:1;cursor:crosshair}#start-menu{position:fixed;top:0;left:0;width:100%;height:100%;background:radial-gradient(circle,rgba(0,0,0,0.5) 0%,#000 100%);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000;transition:all 1s cubic-bezier(0.4,0,0.2,1)}.title-container{text-align:center;animation:fadeInDown 1.5s ease}.title-game{font-size:clamp(40px,8vw,100px);font-weight:900;color:var(--primary);text-transform:uppercase;letter-spacing:15px;margin:0;text-shadow:0 0 30px rgba(0,242,255,0.5)}.author-name{color:#666;letter-spacing:8px;font-size:14px;margin-top:10px}.btn-play{margin-top:50px;padding:15px 60px;font-size:20px;font-weight:700;background:0 0;border:2px solid var(--primary);color:#fff;border-radius:50px;cursor:pointer;transition:.4s;box-shadow:0 0 20px rgba(0,242,255,0.2)}.btn-play:hover{background:var(--primary);color:#000;box-shadow:0 0 40px var(--primary);transform:scale(1.05)}.material-selector{position:absolute;bottom:30px;left:50%;transform:translateX(-50%) translateY(100px);display:flex;gap:10px;padding:10px;background:var(--glass);backdrop-filter:blur(15px);border-radius:50px;border:1px solid var(--border);z-index:100;transition:.5s .8s ease-out}.active-game .material-selector{transform:translateX(-50%) translateY(0)}.mat-item{padding:10px 25px;border:none;border-radius:25px;background:0 0;color:#888;cursor:pointer;font-weight:700;transition:.3s}.mat-item.active{background:var(--primary);color:#000}.side-panel{position:fixed;right:-350px;top:0;width:350px;height:100%;background:var(--glass);backdrop-filter:blur(20px);border-left:1px solid var(--border);transition:.6s cubic-bezier(0.16,1,0.3,1);z-index:500;padding:60px 40px;box-sizing:border-box}.side-panel.active{right:0;box-shadow:-20px 0 60px rgba(0,0,0,0.8)}.panel-trigger{position:absolute;left:-45px;top:50%;transform:translateY(-50%);background:var(--primary);color:#000;width:45px;height:120px;display:flex;align-items:center;justify-content:center;border-radius:15px 0 0 15px;cursor:pointer;writing-mode:vertical-rl;font-weight:900;font-size:14px;letter-spacing:2px}.social-link{display:flex;align-items:center;justify-content:center;width:100%;padding:15px;margin:10px 0;border-radius:10px;text-decoration:none;font-weight:700;transition:.3s;background:rgba(255,255,255,0.05);color:var(--primary);border:1px solid rgba(0,242,255,0.1)}.social-link:hover{background:var(--primary);color:#000;transform:translateX(-5px)}@keyframes fadeInDown{from{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.btn-reset{width:100%;padding:12px;background:0 0;border:1px solid #444;color:#444;border-radius:8px;cursor:pointer;margin-top:30px;transition:.3s}.btn-reset:hover{border-color:var(--accent);color:var(--accent)}
        
        .hud{position:absolute;top:20px;right:20px;background:var(--glass);padding:15px 25px;border-radius:15px;border:1px solid var(--border);backdrop-filter:blur(10px);z-index:10;min-width:180px;transition:0.5s;transform:translateY(-180px)}.active-game .hud{transform:translateY(0)}.stat-label{font-size:10px;color:var(--primary);text-transform:uppercase;letter-spacing:2px;margin-bottom:2px}.stat-value{font-size:22px;font-weight:900;margin-bottom:10px;text-shadow:0 0 10px var(--primary)}.xp-bar-bg{width:100%;height:4px;background:rgba(255,255,255,0.1);border-radius:2px;overflow:hidden}.xp-bar-fill{width:0%;height:100%;background:var(--primary);transition:0.3s;box-shadow:0 0 8px var(--primary)}
    </style>
</head>
<body oncontextmenu="return false;"> 
    <div class="wallpaper"></div>

    <div class="hud">
        <div class="stat-label">Pontos</div>
        <div id="score" class="stat-value">0</div>
        <div class="stat-label">N&iacute;vel <span id="level">1</span></div>
        <div class="xp-bar-bg"><div id="xp-fill" class="xp-bar-fill"></div></div>
        <div class="stat-label" style="margin-top:10px;">Rank</div>
        <div id="rank" class="stat-value" style="font-size:14px;color:#fff">Iniciante</div>
    </div>

    <div id="start-menu">
        <div class="title-container">
            <h1 class="title-game">Fiber Break</h1>
            <div class="author-name">POR BUENOX</div>
        </div>
        <button class="btn-play" onclick="initGame()">ENTRAR NA SIMULA&Ccedil;&Atilde;O</button>
    </div>

    <div class="material-selector" id="matUI">
        <button class="mat-item active" onclick="setMat('silk', this)">SEDA</button>
        <button class="mat-item" onclick="setMat('steel', this)">A&Ccedil;O</button>
        <button class="mat-item" onclick="setMat('slime', this)">SLIME</button>
    </div>

    <div class="side-panel" id="sidePanel">
        <div class="panel-trigger" onclick="togglePanel()">PAINEL</div>
        <h2 style="color: var(--primary); margin-top: 0;">BuenoX</h2>
        <p style="color: #666; font-size: 14px; line-height: 1.6;">Fiber Break &eacute; um experimento f&iacute;sico de alta fidelidade simulando resist&ecirc;ncia de materiais.</p>
        <div style="margin-top: 40px;">
            <a href="https://www.instagram.com/plbueno_" target="_blank" class="social-link">INSTAGRAM</a>
            <a href="https://www.tiktok.com/@jotaah__" target="_blank" class="social-link">TIK TOK</a>
        </div>
        <button class="btn-reset" onclick="resetCloth()">RESTAURAR MALHA</button>
    </div>

    <canvas id="canvas"></canvas>

    <script>
        (function() {
            const _0xmat = {
                'silk': { 'grav': 0.18, 'frict': 0.98, 'tear': 55, 'color': "#00f2ff" },
                'steel': { 'grav': 0.45, 'frict': 0.94, 'tear': 130, 'color': "#cccccc" },
                'slime': { 'grav': 0.08, 'frict': 0.99, 'tear': 40, 'color': "#39ff14" }
            };
            const _0xcfg = { 'w': 70, 'h': 42, 's': 12, 'm': 45, 'r': 0.0025 };
            const _0xcan = document.getElementById("canvas"), _0xctx = _0xcan.getContext("2d");
            let _0xpts = [], _0xcts = [], _0xm = { x: 0, y: 0, px: 0, py: 0 }, _0xr = false, _0xac = _0xmat['silk'];
            
            let _0xsc = 0, _0xlv = 1, _0xcurXp = 0;
            const _0xranks = ["Iniciante", "Aprendiz", "Intermedi\u00e1rio", "Avan\u00e7ado", "Especialista", "Mestre das Fibras"];

            function _0xgetReqXp(l) { return Math.floor(2000 * Math.pow(l, 1.6)); }

            window.initGame = function() {
                document.getElementById("start-menu").style.opacity = '0';
                document.body.classList.add("active-game");
                setTimeout(() => { document.getElementById("start-menu").style.display = "none"; _0xr = true; }, 1000);
            };

            window.togglePanel = function() { document.getElementById("sidePanel").classList.toggle("active"); };

            window.setMat = function(t, b) {
                _0xac = _0xmat[t];
                document.querySelectorAll(".mat-item").forEach(x => x.classList.remove("active"));
                b.classList.add("active");
                window.resetCloth();
            };

            class _0xP {
                constructor(x, y, p) { this.x = x; this.y = y; this.px = x; this.py = y; this.p = p; }
                u() {
                    if (this.p) return;
                    let vx = (this.x - this.px) * _0xac.frict, vy = (this.y - this.py) * _0xac.frict;
                    this.px = this.x; this.py = this.y;
                    this.x += vx; this.y += vy + _0xac.grav;
                    let dx = this.x - _0xm.x, dy = this.y - _0xm.y;
                    if (Math.sqrt(dx*dx + dy*dy) < _0xcfg.m) {
                        this.px -= (_0xm.x - _0xm.px) * 0.5; this.py -= (_0xm.y - _0xm.py) * 0.5;
                    }
                }
            }

            class _0xC {
                constructor(a, b) { this.p1 = a; this.p2 = b; this.l = _0xcfg.s; this.a = true; }
                rs() {
                    if (!this.a) {
                        if (Math.random() < _0xcfg.r && Math.hypot(this.p1.x - this.p2.x, this.p1.y - this.p2.y) < _0xcfg.s * 1.5) this.a = true;
                        return;
                    }
                    let dx = this.p2.x - this.p1.x, dy = this.p2.y - this.p1.y, d = Math.sqrt(dx*dx+dy*dy);
                    if (d > _0xac.tear) { 
                        this.a = false; 
                        _0xaddP(); 
                    }
                    let f = (this.l - d) / d * 0.5;
                    if (!this.p1.p) { this.p1.x -= dx * f; this.p1.y -= dy * f; }
                    if (!this.p2.p) { this.p2.x += dx * f; this.p2.y += dy * f; }
                }
            }

            function _0xaddP() {
                _0xsc += 12;
                _0xcurXp += 12;
                document.getElementById("score").innerText = _0xsc;
                let req = _0xgetReqXp(_0xlv);
                let perc = (_0xcurXp / req) * 100;
                document.getElementById("xp-fill").style.width = Math.min(perc, 100) + "%";
                if(_0xcurXp >= req) {
                    _0xcurXp = 0;
                    _0xlv++;
                    document.getElementById("level").innerText = _0xlv;
                    document.getElementById("xp-fill").style.width = "0%";
                    let rIdx = Math.min(Math.floor(_0xlv / 3.5), _0xranks.length - 1);
                    document.getElementById("rank").innerText = _0xranks[rIdx];
                }
            }

            window.resetCloth = function() {
                _0xcan.width = window.innerWidth; _0xcan.height = window.innerHeight;
                _0xpts = []; _0xcts = [];
                let ox = _0xcan.width / 2 - (_0xcfg.w * _0xcfg.s) / 2;
                for (let y = 0; y <= _0xcfg.h; y++) {
                    for (let x = 0; x <= _0xcfg.w; x++) {
                        let p = new _0xP(ox + x * _0xcfg.s, 60 + y * _0xcfg.s, y === 0);
                        _0xpts.push(p);
                        if (x > 0) _0xcts.push(new _0xC(_0xpts[_0xpts.length - 2], p));
                        if (y > 0) _0xcts.push(new _0xC(_0xpts[_0xpts.length - _0xcfg.w - 2], p));
                    }
                }
            };

            function _0xlp() {
                _0xctx.clearRect(0, 0, _0xcan.width, _0xcan.height);
                _0xctx.beginPath(); _0xctx.strokeStyle = _0xac.color; _0xctx.lineWidth = 1;
                _0xcts.forEach(c => { if (c.a) { _0xctx.moveTo(c.p1.x, c.p1.y); _0xctx.lineTo(c.p2.x, c.p2.y); } });
                _0xctx.stroke();
                if (_0xr) {
                    _0xpts.forEach(p => p.u());
                    for (let i = 0; i < 6; i++) _0xcts.forEach(c => c.rs());
                }
                requestAnimationFrame(_0xlp);
            }

            window.addEventListener("mousemove", e => { _0xm.px = _0xm.x; _0xm.py = _0xm.y; _0xm.x = e.clientX; _0xm.y = e.clientY; });
            window.addEventListener("resize", window.resetCloth);
            window.resetCloth(); _0xlp();
        })();
    </script>
</body>
</html>
